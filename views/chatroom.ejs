<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat App</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/chat.css">
</head>
<body>

  <div class="mainChatContainer">
    <p hidden id="name"><%=name%></p>
    <p hidden id="owner"><%=owner%></p>
    <p hidden id="avatarid"><%=ownerAvatar%></p>
    <% if(isOwner) { %>
      <h1 class="heading">Your Chatroom</h1>
      <% } else { %>
      <h1 class="heading"><%-owner%>'s Chatroom</h1>
    <% } %>
    <div class="button" >
      <button class="leave-button" id="leaveRoom" onclick="exitRoom()">Leave</button>
    </div>

    <div class='message-container'>
      <section class="chat-section">
        <% if(isOwner) { %>
          <div id="message-area" class="message-area">
          <% } else { %>
            <div id="message-area" class="message-area" style="height: 530px;">
          <% } %>

          <% messages.map(message=>{ %>
            <div>
              <div class="message incoming" >
                <h4><%-owner%></h4>
                <p><%-message.text%></p>
                <div class="time"><%=message.time%></div>
              </div>
              <img class="msgAvatar" src='/avatars/<%=ownerAvatar%>.png' />
            </div>
          <% }) %>

        </div>
        <% if(isOwner) { %>
          <div>
            <input id="input" autocomplete="off" onkeypress="handleSend(event)" class='message-text' placeholder="Write a message..." />
          </div>
        <% } %>
        
      </section>
    </div>

  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/js/script.js"></script>
</body>
</html>